{"version":3,"sources":["js/shoppingCart.js"],"names":["getShoppingCart","shoppingCart","sessionStorage","getItem","JSON","parse","getProducts","resetShoppingCart","setItem","addItemToCart","productToAdd","products","product","find","productInCart","makat","Number","quantityInStore","existingProduct","productDetails","_objectWithoutProperties","_excluded","amount","push","_objectSpread","stringify","alert","changeProductAmount","productIndex","changingAmount","p","splice","renderShoppingCart","clearShoppingCart","calculateTotal","total","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","value","cost","err","e","f","removeItemFromCart","indexItemToRemove","document","addEventListener"],"mappings":"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","file":"shoppingCart.b3e9d600.js","sourceRoot":"..","sourcesContent":["function getShoppingCart() {\r\n  const shoppingCart = sessionStorage.getItem(\"shoppingCart\")\r\n  return shoppingCart ? JSON.parse(shoppingCart) : []\r\n}\r\n\r\nfunction getProducts() {\r\n  return sessionStorage.getItem(\"products\")\r\n    ? JSON.parse(sessionStorage.getItem(\"products\"))\r\n    : []\r\n}\r\n\r\nfunction resetShoppingCart() {\r\n  sessionStorage.setItem(\"shoppingCart\", [])\r\n}\r\n\r\nfunction addItemToCart(productToAdd) {\r\n  let shoppingCart = getShoppingCart()\r\n  let products = getProducts()\r\n  const product = products.find(\r\n    (productInCart) => productInCart.makat === productToAdd.makat\r\n  )\r\n  if (Number(product.quantityInStore) > 0) {\r\n    existingProduct = shoppingCart.find(\r\n      (productInCart) => productInCart.makat === productToAdd.makat\r\n    )\r\n    product.quantityInStore--\r\n    const { quantityInStore, ...productDetails } = productToAdd\r\n    existingProduct\r\n      ? existingProduct.amount++\r\n      : shoppingCart.push({ ...productDetails, amount: 1 })\r\n    sessionStorage.setItem(\"shoppingCart\", JSON.stringify(shoppingCart))\r\n    sessionStorage.setItem(\"products\", JSON.stringify(products))\r\n  } else {\r\n    alert(\"מצטערים, המוצר אזל מהמלאי:(\")\r\n  }\r\n}\r\nfunction changeProductAmount(productIndex, changingAmount) {\r\n  let shoppingCart = getShoppingCart()\r\n  let productInCart = shoppingCart[productIndex]\r\n  const products = getProducts()\r\n  const product = products.find((p) => p.makat === productInCart.makat)\r\n\r\n  if (changingAmount == \"1\") {\r\n    if (product.quantityInStore >= 1) {\r\n      productInCart.amount += 1\r\n      product.quantityInStore--\r\n    } else {\r\n      alert(\"לא ניתן להוסיף יותר מן הכמות הנוכחית עקב מחסור במלאי\")\r\n    }\r\n  } else {\r\n    productInCart.amount -= 1\r\n    productInCart.amount <= 0 ? shoppingCart.splice(productIndex, 1) : null\r\n    product.quantityInStore++\r\n  }\r\n  sessionStorage.setItem(\"shoppingCart\", JSON.stringify(shoppingCart))\r\n  sessionStorage.setItem(\"products\", JSON.stringify(products))\r\n  renderShoppingCart()\r\n}\r\n\r\nfunction clearShoppingCart() {\r\n  //לעבור על הסשן סטורג ולהוסיף את הכמויות\r\n  shoppingCart = []\r\n  renderShoppingCart()\r\n}\r\n\r\nfunction calculateTotal() {\r\n  const shoppingCart = getShoppingCart()\r\n  let total = 0\r\n  for (let item of shoppingCart) {\r\n    total += item.amount * item.cost\r\n  }\r\n  return total\r\n}\r\n\r\nfunction removeItemFromCart(indexItemToRemove) {\r\n  const shoppingCart = getShoppingCart()\r\n  shoppingCart.splice(indexItemToRemove, 1)\r\n  sessionStorage.setItem(\"shoppingCart\", JSON.stringify(shoppingCart))\r\n  renderShoppingCart()\r\n}\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", renderShoppingCart)\r\n"]}